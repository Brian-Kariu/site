---
import { ExternalLink } from 'lucide-react'
import { MenuItems } from 'astro-navbar'
import ToggleTheme from './ui/ToggleTheme.astro'
import { Button } from '@/components/ui.astro/button.tsx'
import { ResizablePanelGroup } from '@/components/ui.astro/resizable.tsx'

const menuitems = [
	{
		title: 'About',
		path: 'about'
	},
	{
		title: 'Projects',
		path: 'projects'
	},
	{
		title: 'Contact',
		path: 'contact'
	}
]
---

<script>
	const buttons = document.querySelectorAll('button#nav-button')

	buttons.forEach((button) => {
		button.addEventListener('click', () => {
			const elementId = button.getAttribute('href')
			const element = document.getElementById(elementId)
			element?.scrollIntoView({
				behavior: 'smooth',
				block: 'end',
				inline: 'nearest'
			})
		})
	})
</script>

<header data-testId='header'>
	<MenuItems class='my-5 flex flex-col items-center justify-center lg:flex-row mx-9'>
		<ResizablePanelGroup
			direction='horizontal'
			className='rounded-base border-2 border-border text-mtext shadow-shadow flex justify-between items-center px-3'
		>
			<ToggleTheme />

			<div class='flex flex-col my-2 lg:flex-row lg:gap-3'>
				<ul class='flex flex-col lg:flex-row lg:gap-3'>
					{
						menuitems.map((item) => (
							<>
								<li>
									<Button
										id='nav-button'
										aria-label='navigation link'
										target={'_self'}
										href={item.path}
										class='flex py-2 lg:px-3'
										client:load
									>
										{item.title}
									</Button>
								</li>
							</>
						))
					}
				</ul>
				<Button
					aria-label='navigation link'
					target={'_self'}
					href='/blog'
					class='flex py-2 lg:px-3'
					client:load
				>
					Blog <ExternalLink />
				</Button>
			</div>
		</ResizablePanelGroup>
	</MenuItems>
</header>
